---
import * as p from "path";
import { buildTree, TreeNode } from "./tree";

type Props = {
  title: string;
  path: string;
};
const { title, path } = Astro.props as Props;

const tree = buildTree(path);

function relativePath(file: string) {
  return file.slice(path.length + 1);
}
---

<section class="window">
  <header>{title}</header>
  <ol class="content">
    {
      tree.children.map(({ path, size }) => (
        <li class="file">
          <div>{relativePath(path)}</div>
          <div>{size}</div>
        </li>
      ))
    }
  </ol>
</section>

<style>
  .content {
    font-family: var(--font-mono);
    font-size: 0.8rem;
    list-style: none;
    padding: 4px 8px;
    background-color: black;
    border-radius: 6px;
  }

  .file {
    display: flex;
    justify-content: space-between;
    margin: 0;
  }

</style>
