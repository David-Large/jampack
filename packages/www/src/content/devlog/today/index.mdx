---
date: 2023-02-07
author: ['georges-gomes']
title: Embedding images improvement
---

import wcd from './wcd.png';
import requestsBefore from './requests-before.png';

Up until now, `jampack v0.8.1` embeds small images (&lt;400 bytes).

The reasoning was: An HTTP header response is already around 400 bytes, why bother with an HTTP roundtrip? This is also using an HTTP request that could be used to retrieve something more important for the page.

Actually, all this concern is only valuable above the fold. Below the fold, images are only loaded when scrolling with `loading="lazy"`. So, embedding images after the fold is actually not an improvement.

## Embedding images only above the fold

I'm gonna use one of our websites to test it out: [https://webcomponents.dev](https://webcomponents.dev)

<picture>
  <img src={wcd} alt="Landing screenshot of WebComponents.dev" />
</picture>

In this landing, `jampack` embedded the WebComponents.dev logo but not the Twitter, Discord or GitHub.

Good performance already ðŸ˜‹.

| First Byte | Start Render | FCP   | Speed Index | LCP   | CLS | TBT | Total Bytes |
| ---------- | ------------ | ----- | ----------- | ----- | --- | --- | ----------- |
| .191S      | .300S        | .339S | .382S       | .341S | 0   | 0S  | 65KB        |

<picture>
  <img src={requestsBefore} alt="Browser request view from WebPageTest.org" />
</picture>

Let see if we can remove some of the request out of the picture by embedding more aggressively above the fold.

### Bumping to embedding threshold

Let's bump the embedding limit to 1024 bytes when above the fold. We will embed more
images but only when it matters: above the fold.
